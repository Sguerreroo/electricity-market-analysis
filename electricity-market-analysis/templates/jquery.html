{% extends 'index.html' %}

{% block intro %}
     <h1> Reconocimiento de facturas </h1>
{% endblock %}

{% block script %}
<!--   <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script> -->
  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>

  <script>
    function addSubmit(ev) {
      ev.preventDefault();
      
      var formData = new FormData(this);
      
      $.ajax({
        method: 'POST',
        url: {{ url_for('process_bill')|tojson }},
        data: formData,
        cache: false,
        contentType: false,
        processData: false,
        dataType :   'json'
      }).done(addShow);
    }

    
    function addShow(data) {
      $('#result').text(data.result);
    }

    $('#factura').on('submit', addSubmit);
    
  </script>
  
  
<script type="text/javascript">

// https://jsfiddle.net/chmLkau2/1/

function previewFile() {
  var nodes = document.querySelectorAll('iframe');
  var preview = nodes[nodes.length- 1];
  var file = document.querySelector('input[type=file]').files[0];
  var reader = new FileReader();

  reader.addEventListener("load", function() {
    console.log('before preview');
    preview.src = reader.result;
    console.log('after preview');
  }, false);

  if (file) {
    console.log('inside if');
    reader.readAsDataURL(file);
  } else {
    console.log('inside else');
  }
}

</script>

  
{% endblock %}
